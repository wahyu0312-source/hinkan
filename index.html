<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>品質管理生産技術部 — Dashboard</title>

<!-- Tipografi & palet mengikuti halaman kamu -->
<style>
  :root{
    --bg:#f6f7fb; --panel:#fff; --ink:#0f172a; --muted:#64748b; --border:#e5e7eb; --ring:#c7d2fe;
    --accent:#2563eb; --accent-2:#1d4ed8; --ok:#16a34a; --warn:#f59e0b;
    --radius-xl:22px; --radius:12px;
    --shadow-1:0 12px 30px rgba(15,23,42,.08); --shadow-2:0 30px 60px rgba(15,23,42,.10);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP","Yu Gothic",sans-serif;
    background:
      radial-gradient(1100px 540px at -12% -12%, #c7d2fe 0%, transparent 60%),
      radial-gradient(820px 460px at 112% -6%, #bae6fd 0%, transparent 55%),
      linear-gradient(120deg,#f8fafc,var(--bg));
  }
  a{color:inherit;text-decoration:none}

  /* ===== Shell ===== */
  .app{
    display:grid;
    grid-template-rows:64px 1fr;
    grid-template-areas:"header" "main";
    min-height:100vh;
  }
  header{
    grid-area:header; position:sticky; top:0; z-index:60;
    backdrop-filter:blur(12px); background:#ffffffc7; border-bottom:1px solid var(--border);
  }
  .header-wrap{
    height:64px; max-width:1400px; margin:0 auto;
    display:flex; align-items:center; justify-content:space-between; gap:12px; padding:0 14px;
  }
  .brand{display:flex; align-items:center; gap:10px}
  .brand img{height:36px}
  .brand .ttl{font-weight:800}

  .top-actions{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .btn{
    height:34px; padding:0 12px; border:1px solid var(--border); border-radius:10px; background:#fff;
    display:inline-flex; align-items:center; gap:8px; cursor:pointer;
  }
  .btn:hover{border-color:var(--ring)}
  .btn.primary{background:var(--accent); color:#fff; border-color:#1e40af; box-shadow:0 6px 16px rgba(37,99,235,.25)}

  /* Burger (mobile) */
  .burger{display:none; align-items:center; justify-content:center; width:38px; height:38px;
          border:1px solid var(--border); border-radius:10px; background:#fff; cursor:pointer}
  .burger:active{transform:scale(.98)}

  /* ===== Main ===== */
  main{ grid-area:main; max-width:1400px; margin:0 auto; padding:22px 20px 120px }
  .page-head{ display:flex; justify-content:space-between; align-items:end; gap:16px; margin-bottom:14px }
  .h1{ font-size:22px; margin:0 }
  .small{ font-size:12px; color:var(--muted) }

  .panel{ background:#fff; border:1px solid var(--border); border-radius:var(--radius-xl); box-shadow:var(--shadow-2); padding:18px }
  .panel + .panel{ margin-top:16px }

  /* ===== Hero ===== */
  .hero{
    display:grid; grid-template-columns: 1.1fr .9fr; gap:16px; align-items:stretch;
  }
  .hero .card{
    background:#fff; border:1px solid var(--border); border-radius:20px; box-shadow:var(--shadow-2); padding:18px; overflow:hidden;
  }
  .hero .title{
    display:flex; align-items:center; gap:10px; margin-bottom:6px; font-weight:800; font-size:18px;
  }
  .stat-row{display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:10px; margin-top:10px}
  .stat{background:#f8fafc; border:1px solid var(--border); border-radius:14px; padding:12px}
  .stat b{display:block; font-size:18px}
  .stat small{color:var(--muted)}

  .quick-links{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px }
  .qk{display:flex; align-items:center; gap:10px; padding:12px; border:1px solid var(--border); border-radius:14px; background:#fff}
  .qk:hover{ border-color:#93c5fd; background:#f8fbff }
  .qk .ico{font-size:18px}

  /* ===== Grid ===== */
  .grid{ display:grid; gap:14px; grid-template-columns:repeat(3,minmax(0,1fr)) }
  @media (max-width:1100px){ .hero{grid-template-columns:1fr} .grid{ grid-template-columns:repeat(2,minmax(0,1fr)) } }
  @media (max-width:700px){ .burger{display:inline-flex} .top-actions{display:none} .grid{ grid-template-columns:1fr } }

  .card{ background:#fff; border:1px solid var(--border); border-radius:16px; box-shadow:0 10px 25px rgba(0,0,0,.06); padding:16px }
  .card h3{ margin:0 0 10px }
  .list{ display:flex; flex-direction:column; gap:8px }
  .item{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:10px 12px; border:1px solid var(--border); border-radius:12px; background:#fff;
  }
  .item small{ color:var(--muted) }

  /* ===== Hover Sidebar (desktop) ===== */
  .edge-hotspot{ position:fixed; left:0; top:64px; width:12px; height:calc(100vh - 64px); z-index:70 }
  .hover-side{
    position:fixed; left:0; top:64px; height:calc(100vh - 64px);
    width:260px; padding:14px 12px; overflow:auto;
    background:var(--panel); border-right:1px solid var(--border); box-shadow:var(--shadow-1);
    transform:translateX(-100%); transition:transform .22s ease; z-index:71;
  }
  .hover-side.open{ transform:translateX(0) }
  .hover-side h3{ margin:4px 8px 10px; font-size:12px; letter-spacing:.08em; color:#6b7280; text-transform:uppercase }
  .navlist{ display:grid; gap:4px }
  .slink{ display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; color:var(--ink) }
  .slink small{color:var(--muted)}
  .slink:hover{ background:#f1f5ff }
  .ico{ width:22px; text-align:center }

  /* ===== Drawer (mobile) ===== */
  .drawer{ position:fixed; inset:0; z-index:80; display:none }
  .drawer.open{ display:block }
  .drawer .backdrop{ position:absolute; inset:0; background:#0006 }
  .drawer .panel{ position:absolute; top:0; left:0; height:100%; width:min(86%,320px);
                  background:#fff; border-right:1px solid var(--border); box-shadow:var(--shadow-2); padding:14px 12px; overflow:auto;
                  transform:translateX(-100%); transition:transform .25s ease }
  .drawer.open .panel{ transform:translateX(0) }
  .drawer .close{ position:absolute; right:10px; top:10px; border:0; background:#f1f5f9; border:1px solid var(--border); border-radius:8px; padding:6px 10px; cursor:pointer }

  /* Footer & marquee */
  .marquee{ position:fixed; left:20px; right:20px; bottom:20px; z-index:30; background:var(--accent); color:#fff; font-weight:800; border-radius:12px; box-shadow:var(--shadow-1); white-space:nowrap; overflow:hidden }
  .marquee span{ display:inline-block; padding:8px 0 8px 100%; animation:marquee 18s linear infinite }
  @keyframes marquee{ 0%{transform:translateX(0)} 100%{transform:translateX(-100%)} }
  .footer{ position:fixed; bottom:0; left:0; right:0; z-index:31; text-align:center; font-size:12px; color:var(--muted); background:#f1f5f9; padding:4px 0; border-top:1px solid var(--border) }

  /* Admin */
  .admin-only{ display:none }
  .pill{display:inline-block;padding:2px 8px;border:1px solid var(--border);border-radius:999px;font-size:12px;color:#334155}
  .pill.ok{background:#ecfdf5;border-color:#bbf7d0;color:#065f46}
  .pill.warn{background:#fffbeb;border-color:#fde68a;color:#92400e}
</style>
</head>

<body>
<div class="app" id="appRoot">
  <!-- ===== HEADER ===== -->
  <header>
    <div class="header-wrap">
      <button id="btnBurger" class="burger" aria-label="メニュー"><span>☰</span></button>

      <div class="brand">
        <!-- Logo user (disembunyikan jika belum ada) -->
        <img src="tsh.png" alt="TSH" onerror="this.style.display='none'">
        <strong class="ttl">品質管理生産技術部</strong>
      </div>

      <nav class="top-actions" aria-label="Top navigation">
        <a class="btn primary" href="./index.html" aria-current="page">🏠 ホーム</a>
        <a class="btn" href="./forms.html">📄 出荷検査成績書</a>
        <a class="btn" href="./sagyoutejunsho.html">📝 作業手順書</a>
        <a class="btn" href="./charts.html">📈 チャート</a>
        <a class="btn" href="./quality.html">🔎 品質情報</a>
        <!-- Konsisten dengan halaman lain -->
        <a class="btn" href="./admin-prefix.html">🔑 Admin Prefix</a>
        <button id="btnAdmin" class="btn" type="button" title="Admin login/logout">管理</button>
      </nav>
    </div>
  </header>

  <!-- ===== MAIN ===== -->
  <main>
    <div class="page-head">
      <h1 class="h1">Dashboard</h1>
      <span class="small">
        <span id="admState" class="pill warn" aria-live="polite">管理: OFF</span>
      </span>
    </div>

    <!-- ===== Hero ===== -->
    <section class="hero" aria-label="Hero">
      <div class="card" aria-labelledby="quick-title">
        <div class="title" id="quick-title">🚀 クイックアクセス</div>
        <div class="quick-links">
          <a class="qk" href="./forms.html"><span class="ico">📄</span><div><b>出荷検査成績書</b><div class="small">フォルダ/検索</div></div></a>
          <a class="qk" href="./sagyoutejunsho.html"><span class="ico">📝</span><div><b>作業手順書</b><div class="small">組立/出荷/基準</div></div></a>
          <a class="qk" href="./quality.html"><span class="ico">🔎</span><div><b>品質情報</b><div class="small">外観・最終検査</div></div></a>
          <a class="qk" href="./charts.html"><span class="ico">📈</span><div><b>チャート</b><div class="small">トレンド/可視化</div></div></a>
        </div>
        <div class="small" style="margin-top:8px;color:var(--muted)">ショートカットは固定リンクで、モバイルでも使いやすいUIです。</div>
      </div>

      <div class="card" aria-labelledby="stat-title">
        <div class="title" id="stat-title">📊 ステータス</div>
        <div class="stat-row">
          <div class="stat"><small>今日のチェック</small><b id="kpiToday">12</b></div>
          <div class="stat"><small>公開ドキュメント</small><b id="kpiDocs">17</b></div>
          <div class="stat"><small>管理状況</small><b><span id="kpiAdmin">OFF</span></b></div>
        </div>
      </div>
    </section>

    <!-- ===== Cards ===== -->
    <section class="grid" aria-label="Main sections">
      <div class="card">
        <h3>📂 最近アクセス</h3>
        <div id="recentList" class="list" aria-live="polite">
          <!-- will be populated -->
        </div>
      </div>

      <div class="card">
        <h3>📎 よく使うリンク</h3>
        <div class="list">
          <a class="item" href="https://online.fliphtml5.com/fjppt/mhky/" target="_blank" rel="noopener noreferrer">
            <span>検査手順書MB-XX</span><small>FlipHTML5</small>
          </a>
          <a class="item" href="https://wahyu0312-source.github.io/okuma46/" target="_blank" rel="noopener noreferrer">
            <span>2825-20 MB-46V Y軸</span><small>オークマ</small>
          </a>
          <a class="item" href="./admin-prefix.html">
            <span>Admin Prefix</span><small>6桁プレフィックス管理</small>
          </a>
        </div>
      </div>

      <div class="card">
        <h3>🧰 管理ツール</h3>
        <div class="list">
          <a class="item admin-only" href="./admin-numbering.html"><span>Admin Numbering</span><small>server counter</small></a>
          <a class="item admin-only" href="./admin-serial-gas.html"><span>Admin Serial (GAS)</span><small>prefix digits/next</small></a>
          <a class="item admin-only" href="./thanks.html"><span>Thanks</span><small>credit</small></a>
          <div class="item">
            <span>管理モード</span>
            <button id="btnAdmin2" class="btn" type="button">管理</button>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- ===== Hover Sidebar (desktop) ===== -->
<div id="edgeHotspot" class="edge-hotspot" aria-hidden="true"></div>
<aside id="hoverSide" class="hover-side" aria-label="Pages">
  <h3>Pages</h3>
  <div class="navlist">
    <a class="slink" href="./index.html"><span class="ico">🏠</span><strong>ホーム</strong><small>Dashboard</small></a>
    <a class="slink" href="./forms.html"><span class="ico">📄</span><strong>出荷検査成績書</strong></a>
    <a class="slink" href="./sagyoutejunsho.html"><span class="ico">📝</span><strong>作業手順書</strong></a>
    <a class="slink" href="./charts.html"><span class="ico">📈</span><strong>チャート</strong></a>
    <a class="slink" href="./quality.html"><span class="ico">🔎</span><strong>品質情報</strong></a>
    <a class="slink" href="./admin-prefix.html"><span class="ico">🔑</span><strong>Admin Prefix</strong><small>6桁管理</small></a>
    <a class="slink admin-only" href="./admin-serial-gas.html"><span class="ico">⛽</span><strong>Admin Serial GAS</strong></a>
  </div>
</aside>

<!-- ===== Drawer (mobile) ===== -->
<div id="drawer" class="drawer" aria-hidden="true">
  <div class="backdrop" data-close></div>
  <aside class="panel">
    <button class="close" data-close>✕</button>
    <div class="side-card" style="box-shadow:none;border:0;padding-top:30px">
      <h3>Pages</h3>
      <div class="navlist">
        <a class="slink" href="./index.html"><span class="ico">🏠</span><strong>ホーム</strong><small>Dashboard</small></a>
        <a class="slink" href="./forms.html"><span class="ico">📄</span><strong>出荷検査成績書</strong></a>
        <a class="slink" href="./sagyoutejunsho.html"><span class="ico">📝</span><strong>作業手順書</strong></a>
        <a class="slink" href="./charts.html"><span class="ico">📈</span><strong>チャート</strong></a>
        <a class="slink" href="./quality.html"><span class="ico">🔎</span><strong>品質情報</strong></a>
        <a class="slink" href="./admin-prefix.html"><span class="ico">🔑</span><strong>Admin Prefix</strong></a>
      </div>
    </div>
  </aside>
</div>

<div class="marquee"><span>⚙️ 品質管理生産技術ポータルへようこそ ｜ 本日も安全第一でお願いします ｜ 水分補給して下さいお願い致します</span></div>
<div class="footer">Design by Wahyu</div>

<script>
/* ========= Drawer (mobile) ========= */
const drawer = document.getElementById('drawer');
document.getElementById('btnBurger')?.addEventListener('click', ()=>{
  drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false');
});
drawer?.addEventListener('click', (e)=>{
  if(e.target.hasAttribute('data-close')){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }
});

/* ========= Admin gate ========= */
const ADMIN_CODE = "admin2025";
const ADMIN_FLAG_KEY = 'kensa_admin';
function setAdmin(on){
  document.querySelectorAll('.admin-only').forEach(el=> el.style.display = on ? '' : 'none');
  if(on){ localStorage.setItem(ADMIN_FLAG_KEY,'1'); } else { localStorage.removeItem(ADMIN_FLAG_KEY); }
  const s=document.getElementById('admState'); if(s){ s.textContent = on? '管理: ON' : '管理: OFF'; s.className = 'pill ' + (on?'ok':'warn'); }
  document.getElementById('kpiAdmin').textContent = on? 'ON' : 'OFF';
}
function isAdmin(){ return localStorage.getItem(ADMIN_FLAG_KEY)==='1'; }
document.getElementById('btnAdmin')?.addEventListener('click', toggleAdmin);
document.getElementById('btnAdmin2')?.addEventListener('click', toggleAdmin);
function toggleAdmin(){
  if(isAdmin()){
    if(confirm('AdminをOFFにしますか？')) setAdmin(false);
  }else{
    const c = prompt('Admin code:'); if(c===ADMIN_CODE) setAdmin(true); else alert('コードが違います');
  }
}

/* ========= EDGE-HOVER sidebar (desktop) ========= */
const hot = document.getElementById('edgeHotspot');
const fly = document.getElementById('hoverSide');
let hideTimer = null;
const HIDE_DELAY = 240;
function openFly(){ clearTimeout(hideTimer); fly.classList.add('open'); }
function scheduleClose(){ clearTimeout(hideTimer); hideTimer = setTimeout(()=>fly.classList.remove('open'), HIDE_DELAY); }
hot?.addEventListener('mouseenter', openFly);
hot?.addEventListener('mouseleave', scheduleClose);
fly?.addEventListener('mouseenter', ()=> clearTimeout(hideTimer));
fly?.addEventListener('mouseleave', scheduleClose);

/* ========= Recent (local only) ========= */
const recentKey = 'kensa_recent_links';
function getRecent(){ try{return JSON.parse(localStorage.getItem(recentKey)||'[]')}catch{return[]} }
function addRecent(url, label){
  const list = getRecent().filter(x=>x.url!==url);
  list.unshift({url,label,ts:Date.now()}); localStorage.setItem(recentKey, JSON.stringify(list.slice(0,6)));
  renderRecent();
}
function renderRecent(){
  const el = document.getElementById('recentList'); if(!el) return;
  el.innerHTML = '';
  const list = getRecent();
  if(!list.length){ el.innerHTML = '<div class="small" style="color:var(--muted)">最近の履歴はありません。</div>'; return; }
  list.forEach(it=>{
    const a = document.createElement('a');
    a.className='item'; a.href=it.url; a.target='_blank'; a.rel='noopener noreferrer';
    a.innerHTML = `<span>${it.label||it.url}</span><small>${new Date(it.ts).toLocaleString()}</small>`;
    el.appendChild(a);
  });
}

/* Seed beberapa link awal agar kotak “最近アクセス” terisi pertama kali */
(function seedRecentOnce(){
  const flag='kensa_recent_seeded';
  if(!localStorage.getItem(flag)){
    [
      {url:'./forms.html',label:'出荷検査成績書'},
      {url:'./sagyoutejunsho.html',label:'作業手順書'},
      {url:'./quality.html',label:'品質情報'}
    ].forEach(x=>addRecent(x.url,x.label));
    localStorage.setItem(flag,'1');
  }else{ renderRecent(); }
})();

/* Attach listeners to log clicks from quick links */
document.querySelectorAll('.qk').forEach(a=>{
  a.addEventListener('click', ()=> addRecent(a.getAttribute('href'), a.textContent.trim()));
});

/* ========= KPI dummy (bisa dihubungkan ke sumber nyata nanti) ========= */
(function init(){
  setAdmin(isAdmin());
  document.getElementById('kpiToday').textContent = Math.floor(8 + Math.random()*10);
  document.getElementById('kpiDocs').textContent  = 17; // contoh stat
})();
</script>
</body>
</html>
